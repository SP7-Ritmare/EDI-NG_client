<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE template [
    <!ENTITY odp "http://ec.europa.eu/open-data/ontologies/ec-odp#">
    <!ENTITY dct "http://purl.org/dc/terms/">
    <!ENTITY rndt "http://ritmare.it/rdfdata/rndt#">
    <!ENTITY dcat "http://www.w3.org/ns/dcat#">
]>

<!-- SensorML for fixed physical system -->

<template>
    <settings>
        <defaultLanguage>it</defaultLanguage>
        <languageSelection>
            <byItem>ling_md_1</byItem>
        </languageSelection>
        <metadataEndpoint>http://sp7.irea.cnr.it/tomcat2/edi/</metadataEndpoint>
        <!--<metadataEndpoint>http://sp7.irea.cnr.it/jboss/edi/</metadataEndpoint>-->
        <sparqlEndpoint>http://sparql.get-it.it</sparqlEndpoint>
        <!--<sparqlEndpoint>http://sp7.irea.cnr.it:8891/sparql</sparqlEndpoint>-->
        <requiresAuthentication>false</requiresAuthentication>
        <requiresValidation>false</requiresValidation>

        <baseDocument>
            <!-- Base Document SensorML version 2.0.0 -->
            <![CDATA[
            <sml:PhysicalComponent
   xmlns:sml="http://www.opengis.net/sensorml/2.0"
   xmlns:swe="http://www.opengis.net/swe/2.0"
   xmlns:gml="http://www.opengis.net/gml/3.2"
   xmlns:gmd="http://www.isotc211.org/2005/gmd"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:xlink="http://www.w3.org/1999/xlink"
   xsi:schemaLocation="http://www.opengis.net/sensorml/2.0 http://schemas.opengis.net/sensorml/2.0/sensorML.xsd">
    
    </sml:PhysicalComponent>
        ]]>
        </baseDocument>

        <xsltChain>
            <!-- TO DO: add SensorML20.xsl -->
            <!-- TO DO: add in a SensorML20.xsl elements of InsertSensor by 52°North -->
            <xslt>http://sp7.irea.cnr.it/jboss/MDService/rest/SensorML20.xsl?version=1.00</xslt>
        </xsltChain>
    </settings>

    <!-- ENDPOINT TYPES -->
    <endpointTypes>
        <endpointType>
            <id>virtuoso</id>
            <method>GET</method>
            <queryParameter>query</queryParameter>
            <parameters>
                <format>application/sparql-results+json</format>
                <save>display</save>
                <fname>undefined</fname>
            </parameters>
        </endpointType>
    </endpointTypes>

    <!-- DATA SOURCES -->
    <datasources>
        <datasource>
            <id>languages</id>
            <uri>http://inspire-registry.jrc.ec.europa.eu/registers/Languages/items</uri>
            <endpointType>virtuoso</endpointType>
            <type>virtuosoCodelist</type>
            <url>http://sp7.irea.cnr.it:8891/sparql</url>
        </datasource>
        <datasource>
            <id>keywords</id>
            <singleton>false</singleton>
            <endpointType>virtuoso</endpointType>
            <query>
                <![CDATA[
                        PREFIX skos: <http://www.w3.org/2004/02/skos/core#> 
                        SELECT ?c ?l ?a
                        FROM <http://ritmare.it/rdfdata/parameters>
                        WHERE { 
                          ?c rdf:type skos:Concept.
                          OPTIONAL {
                            ?c skos:prefLabel ?l.
                            FILTER( LANG(?l) = "en")
                          }
                          OPTIONAL {
                            ?c skos:prefLabel ?a.
                            FILTER( LANG(?a) = "it")
                          }
                          FILTER( REGEX( STR(?l), "$search_param", "i") || REGEX( STR(?a), "$search_param", "i") )
                        }
                        ORDER BY ASC(?l) ASC(?a) 
                        ]]>
            </query>
            <type> sparql </type>
        </datasource>
        <datasource>
            <id>keywordsS</id>
            <singleton>true</singleton>
            <endpointType>virtuoso</endpointType>
            <query>
                <![CDATA[
                        PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
                        SELECT ?c ?l ?a
                        FROM <http://ritmare.it/rdfdata/parameters>
                        WHERE {
                          ?c rdf:type skos:Concept.
                          OPTIONAL {
                            ?c skos:prefLabel ?l.
                            FILTER( LANG(?l) = "en")
                          }
                          OPTIONAL {
                            ?c skos:prefLabel ?a.
                            FILTER( LANG(?a) = "it")
                          }
                          FILTER( REGEX( STR(?c), "$search_param", "i") || REGEX( STR(?a), "$search_param", "i") )
                        }
                        ORDER BY ASC(?l) ASC(?a)
                        ]]>
            </query>
            <triggerItem>output_param_1_uri</triggerItem>
            <type>sparql</type>
        </datasource>
        <datasource>
            <id>manufacturers</id>
            <singleton>true</singleton>
            <endpointType>virtuoso</endpointType>
            <query>
                <![CDATA[
                        PREFIX ns: <http://www.w3.org/2006/vcard/ns#>                        
                        SELECT ?c ?l 
                        FROM <http://ritmare.it/rdfdata/manufacturers>
                        WHERE { 
                          ?c rdf:type foaf:Organization.
                          ?c foaf:name ?l.
                          FILTER( REGEX( STR(?l), "$search_param", "i") )
                        }
                        ORDER BY ASC(?l)                        
                        ]]>
            </query>
            <type> sparql </type>
        </datasource>
        <datasource>
            <id>info_manufacturers</id>
            <singleton>true</singleton>
            <endpointType>virtuoso</endpointType>
            <query>
                <![CDATA[
                        PREFIX addr: <http://wymiwyg.org/ontologies/foaf/postaddress#>
                        PREFIX vcard: <http://www.w3.org/2006/vcard/ns#>
                        SELECT ?phone fn:concat(?l1, ', ', ?l2) AS ?addr ?town ?region ?postcode ?country ?email ?homepage
                        FROM <http://ritmare.it/rdfdata/manufacturers>
                        WHERE { 
                          OPTIONAL {
                            <$search_param> foaf:phone ?phone .
                          }
                          OPTIONAL {
                            <$search_param> vcard:email ?email.
                          }
                          OPTIONAL {
                            <$search_param> foaf:homepage ?homepage.
                          }
                          OPTIONAL {
                            <$search_param> addr:address ?b1.
                          }
                          OPTIONAL {
                            ?b1 addr:deliveryPoint ?b2.
                          }
                          OPTIONAL {
                            ?b2 addr:location ?b3.
                          }
                          OPTIONAL {
                            ?b3 addr:thoroughfareName ?l1.
                          }
                          OPTIONAL {
                            ?b3 addr:streetNr ?l2.
                          }
                          OPTIONAL {
                            ?b3 addr:town ?town.
                          }
                          OPTIONAL {
                            ?b3 addr:region ?region.
                          }
                          OPTIONAL {
                            ?b3 addr:postcode ?postcode.
                          }
                          OPTIONAL {
                            ?b3 addr:country ?country.
                          }
                        }
                        ]]>
            </query>
            <triggerItem>manuf_name_3_uri</triggerItem>
            <type> sparql </type>
        </datasource>
        <datasource>
            <id>intended_applications</id>
            <singleton>false</singleton>
            <endpointType>virtuoso</endpointType>
            <query>
                <![CDATA[
                        PREFIX skos: <http://www.w3.org/2004/02/skos/core#>        
                        SELECT ?c ?l ?a ?urn                       
                        FROM <http://ritmare.it/rdfdata/parameters>
                        WHERE { 
                          ?c rdf:type skos:Concept.
                          OPTIONAL {
                            ?c skos:notation ?urn. 
                          }
                          OPTIONAL {
                            ?c skos:prefLabel ?l.
                            FILTER( LANG(?l) = 'en') 
                          }
                          OPTIONAL {
                            ?c skos:prefLabel ?a.
                            FILTER( LANG(?a) = 'it') 
                          }
                          FILTER( REGEX( STR(?l), '$search_param', 'i') || REGEX( STR(?a), '$search_param', 'i') ) 
                        }
                        ORDER BY ASC(?l) ASC(?a)
                        ]]>
            </query>
            <type> sparql </type>
        </datasource>
        <datasource>
            <id>type_of_systems</id>
            <singleton>false</singleton>
            <endpointType>virtuoso</endpointType>
            <query>
                <![CDATA[
                        PREFIX skos: <http://www.w3.org/2004/02/skos/core#> 
                        SELECT ?c ?l ?a ?urn
                        WHERE { 
                          ?c rdf:type skos:Concept.
                          ?c skos:inScheme <http://vocab.nerc.ac.uk/collection/L05/current/>.
                          OPTIONAL {
                            ?c skos:notation ?urn.
                          }
                          OPTIONAL {
                            ?c skos:prefLabel ?l.
                            FILTER( LANG(?l) = "en")
                          }
                          OPTIONAL {
                            ?c skos:prefLabel ?a.
                            FILTER( LANG(?a) = "it")
                          }
                          FILTER( REGEX( STR(?l), "$search_param", "i") || REGEX( STR(?a), "$search_param", "i") )
                        }
                        ORDER BY ASC(?l) ASC(?a)
                        ]]>
            </query>
            <type> sparql </type>
        </datasource>
        <datasource>
            <id>uom</id>
            <singleton>true</singleton>
            <endpointType>virtuoso</endpointType>
            <query>
                <![CDATA[
                        PREFIX skos: <http://www.w3.org/2004/02/skos/core#> 
                        SELECT ?c ?l ?urn
                        FROM <http://ritmare.it/rdfdata/units>
                        WHERE { 
                          ?c rdf:type skos:Concept.
                          OPTIONAL {
                            ?c skos:prefLabel ?l.
                            FILTER( LANG(?l) = "en")
                          }
                          OPTIONAL {
                            ?c skos:prefLabel ?a.
                            FILTER( LANG(?a) = "en")
                          }
                          OPTIONAL {
                            ?c skos:altLabel ?urn.
                            FILTER( LANG(?urn) = "en")
                          }
                          FILTER( REGEX( STR(?l), "$search_param", "i") || REGEX( STR(?a), "$search_param", "i") )
                        }
                        ORDER BY ASC(?l) ASC(?a)
                        ]]>
            </query>
            <type> sparql </type>
        </datasource>
        <datasource>
            <id>owners</id>
            <singleton>true</singleton>
            <endpointType>virtuoso</endpointType>
            <query>
                <![CDATA[
                        PREFIX ns: <http://www.w3.org/2006/vcard/ns#> 
                        SELECT ?c ?l
                        FROM <http://ritmare.it/rdfdata/project>
                        WHERE { 
                          ?c rdf:type foaf:Person .
                          ?c ns:email ?l.
                          FILTER( REGEX( STR(?l), "$search_param", "i") )
                        }
                        ORDER BY ASC(?l)
                        ]]>
            </query>
            <type> sparql </type>
        </datasource>
        <datasource>
            <id>info_owner</id>
            <singleton>true</singleton>
            <endpointType>virtuoso</endpointType>
            <query>
                <![CDATA[
                        PREFIX vcard: <http://www.w3.org/2006/vcard/ns#>
                        SELECT ?phone ?addr ?email ?town ?country ?postcode ?homepage ?fullname ?l
                        WHERE { 
                          OPTIONAL {
                            <$search_param> foaf:phone ?phone .
                          }
                          OPTIONAL {
                            <$search_param> foaf:fullName ?fullname .
                          }
                          OPTIONAL {
                            <$search_param> vcard:email ?email .
                          }
                          OPTIONAL {
                            <$search_param> vcard:org ?b3 .
                            ?b3 foaf:homepage ?homepage .
                            ?b3 foaf:name ?l .
                          }
                          {
                            <$search_param> vcard:hasAddress ?b1 .
                            ?b1 vcard:street-address ?addr .
                            ?b1 vcard:locality ?town .
                            ?b1 vcard:postal-code ?postcode .
                            ?b1 vcard:country-name ?b2 .
                            ?b2 foaf:name ?country .
                          } UNION {
                            ?b3 vcard:hasAddress ?b1 .
                            ?b1 vcard:street-address ?addr .
                            ?b1 vcard:locality ?town .
                            ?b1 vcard:postal-code ?postcode .
                            ?b1 vcard:country-name ?b2 .
                            ?b2 foaf:name ?country .
                          }
                          FILTER(lang(?l)='it')
                        }
                        LIMIT 1
                        ]]>
            </query>
            <triggerItem>owner_1_uri</triggerItem>
            <type> sparql </type>
        </datasource>
        <datasource>
            <id>operators</id>
            <singleton>false</singleton>
            <endpointType>virtuoso</endpointType>
            <query>
                <![CDATA[
                        PREFIX ns: <http://www.w3.org/2006/vcard/ns#> 
                        SELECT ?c ?l
                        FROM <http://ritmare.it/rdfdata/project>
                        WHERE { 
                          ?c rdf:type foaf:Person .
                          ?c ns:email ?l.
                          FILTER( REGEX( STR(?l), "$search_param", "i") )
                        }
                        ORDER BY ASC(?l)
                        ]]>
            </query>
            <type> sparql </type>
        </datasource>
        <datasource>
            <id>info_operator</id>
            <singleton>true</singleton>
            <endpointType>virtuoso</endpointType>
            <query>
                <![CDATA[
                        PREFIX vcard: <http://www.w3.org/2006/vcard/ns#>
                        SELECT ?phone ?addr ?email ?town ?country ?postcode ?homepage ?fullname ?l
                        WHERE { 
                          OPTIONAL {
                            <$search_param> foaf:phone ?phone .
                          }
                          OPTIONAL {
                            <$search_param> foaf:fullName ?fullname .
                          }
                          OPTIONAL {
                            <$search_param> vcard:email ?email .
                          }
                          OPTIONAL {
                            <$search_param> vcard:org ?b3 .
                            ?b3 foaf:homepage ?homepage .
                            ?b3 foaf:name ?l .
                          }
                          {
                            <$search_param> vcard:hasAddress ?b1 .
                            ?b1 vcard:street-address ?addr .
                            ?b1 vcard:locality ?town .
                            ?b1 vcard:postal-code ?postcode .
                            ?b1 vcard:country-name ?b2 .
                            ?b2 foaf:name ?country .
                          } UNION {
                            ?b3 vcard:hasAddress ?b1 .
                            ?b1 vcard:street-address ?addr .
                            ?b1 vcard:locality ?town .
                            ?b1 vcard:postal-code ?postcode .
                            ?b1 vcard:country-name ?b2 .
                            ?b2 foaf:name ?country .
                          }
                          FILTER(lang(?l)='it')
                        }
                        LIMIT 1
                        ]]>
            </query>
            <triggerItem>operator_1_uri</triggerItem>
            <type> sparql </type>
        </datasource>
        <datasource>
            <id>parameters</id>
            <singleton>false</singleton>
            <endpointType>virtuoso</endpointType>
            <query>
                <![CDATA[
                        PREFIX skos: <http://www.w3.org/2004/02/skos/core#>        
                        SELECT ?c ?l ?a ?urn                       
                        FROM <http://ritmare.it/rdfdata/parameters>
                        WHERE { 
                          ?c rdf:type skos:Concept.
                          OPTIONAL {
                            ?c skos:notation ?urn. 
                          }
                          OPTIONAL {
                            ?c skos:prefLabel ?l.
                            FILTER( LANG(?l) = 'en') 
                          }
                          OPTIONAL {
                            ?c skos:prefLabel ?a.
                            FILTER( LANG(?a) = 'it') 
                          }
                          FILTER( REGEX( STR(?l), '$search_param', 'i') || REGEX( STR(?a), '$search_param', 'i') ) 
                        }
                        ORDER BY ASC(?l) ASC(?a)
                        ]]>
            </query>
            <type> sparql </type>
        </datasource>
        <datasource>
            <id>items</id>
            <uri>http://ritmare.it/codelists/SensorML/mime/items</uri>
            <endpointType>virtuoso</endpointType>
            <type>virtuosoCodelist</type>
        </datasource>
        <datasource>
            <id>EPSG</id>
            <uri>http://www.rndt.gov.it/codelists/MD_ReferenceSystemCode/items</uri>
            <endpointType>virtuoso</endpointType>
            <type>virtuosoCodelist</type>
        </datasource>
        <datasource>
            <id>deployment_role</id>
            <uri>http://vocab.nerc.ac.uk/collection/L19/current/</uri>
            <endpointType>virtuoso</endpointType>
            <type>virtuosoCodelist</type>
        </datasource>
        <datasource>
            <id>physical_quantity</id>
            <uri>http://sp7.irea.cnr.it/rdfdata/sensors/phys_props/items</uri>
            <endpointType>virtuoso</endpointType>
            <type>virtuosoCodelist</type>
        </datasource>
        <datasource>
            <id>electrical_quantity</id>
            <uri>http://sp7.irea.cnr.it/rdfdata/sensors/electr_reqs/items</uri>
            <endpointType>virtuoso</endpointType>
            <type>virtuosoCodelist</type>
        </datasource>
        <datasource>
            <id>format</id>
            <uri>http://ritmare.it/codelists/SensorML/mime/items</uri>
            <endpointType>virtuoso</endpointType>
            <type>virtuosoCodelist</type>
        </datasource>
        <datasource>
            <id>roleCodes</id>
            <uri>http://inspire.ec.europa.eu/metadata-codelist/ResponsiblePartyRole</uri>
            <endpointType>virtuoso</endpointType>
            <type>virtuosoCodelist</type>
        </datasource>
    </datasources>
    
    <!-- GROUP -->
    <!-- =========== -->
    <!-- Description -->
    <!-- =========== -->
    <!-- valid -->
    <group>
        <id>name_desc</id>
        <label xml:lang="it">Descrizione del componente</label>
        <!--<help xml:lang="it">Questi campi provvedono a fornire una descrizione del sistema,
            denominandolo e descrivendone genericamente le caratteristiche</help>-->
        <label xml:lang="en">Description of component</label>
        <!--<help xml:lang="en">Means of providing a description of system, a name and describing
            general characteristics</help>-->
        <!-- system name -->
        <element>
            <id>system_name</id>
            <label xml:lang="it">Nome del componente</label>
            <label xml:lang="en">Component name</label>
            <help xml:lang="it">&#200; il nome con cui si identifica il componente (es. termometro), deve
                essere breve, non ne &#232; la descrizione, e pu&#242; coincidere con il nome 
                dato dal costruttore (es. Sensirion STH15, SBE 37-IM, MicroCAT,
                CTP Recorder, ecc.).</help>
            <help xml:lang="en">Name assigned to identify the physical component. It should be short, while it is
                not its description; it could coincide with the name given by the manufacturer.</help>
            <isMandatory>forAll</isMandatory>
            <isMultiple>false</isMultiple>
            <hasRoot>/sml:PhysicalComponent</hasRoot>
            <produces>
                <item>
                    <hasIndex>1</hasIndex>
                    <outIndex>2</outIndex>
                    <hasPath>TheName</hasPath>
                    <isFixed>false</isFixed>
                    <hasDatatype>string</hasDatatype>
                    <!--<hasValue>user-defined</hasValue>-->
                </item>
                <item>
                    <hasIndex>4</hasIndex>
                    <outIndex>4</outIndex>
                    <hasPath>@gml:id</hasPath>
                    <isFixed>true</isFixed>
                    <hasDatatype>function</hasDatatype>
                    <hasValue>concat('ID_', translate(TheName/text(), ' ', '_'))</hasValue>
                </item>
                <item>
                    <hasIndex>2</hasIndex>
                    <outIndex>1</outIndex>
                    <label xml:lang="it">Descrizione del componente</label>
                    <help xml:lang="it">Contiene una descrizione testuale del singolo componente.</help>
                    <label xml:lang="en">Description of the physical system</label>
                    <help xml:lang="en">Brief description of the sensor, of the component.</help>
                    <hasPath>gml:description</hasPath>
                    <isFixed>false</isFixed>
                    <hasDatatype>text</hasDatatype>
                    <!--<hasValue>user-defined</hasValue>-->
                </item>
                <item>
                    <hasIndex>3</hasIndex>
                    <outIndex>3</outIndex>
                    <hasPath>gml:identifier/@codeSpace</hasPath>
                    <isFixed>true</isFixed>
                    <hasDatatype>function</hasDatatype>
                    <hasValue>concat('ID_', translate(TheName/text(), ' ', '_'))</hasValue>
                </item>
                <item>
                    <hasIndex>5</hasIndex>
                    <outIndex>5</outIndex>
                    <hasPath>gml:name</hasPath>
                    <isFixed>true</isFixed>
                    <hasDatatype>ref</hasDatatype>
                    <hasValue>TheName</hasValue>
                </item>
            </produces>
        </element>
    </group>
    <!--END Description group -->

    <!--======== -->
    <!--Keywords -->
    <!--======== -->
    <!-- valid -->
    <group>
        <id>keyword</id>
        <label xml:lang="it">Parole chiave</label>
        <!--<help xml:lang="it">Parole chiave che descrivono il sistema e permettono il reperimento della risorsa.</help>-->
        <label xml:lang="en">Keywords</label>
        <!--<help xml:lang="en">Describe system by keywords allow the discovery</help>-->
        <!-- keywords a campo libero-->
        <element>
            <id>free_keywords</id>
            <label xml:lang="it">Parole chiave a campo libero</label>
            <help xml:lang="it">Viene qui richiesto di indicare parole chiave che permettono una descrizione del singolo componente, per permetterne il reperimento futuro. Questo campo a differenza del precedente è dedicato alle parole a testo libero e non riferite ad alcun vocabolario controllato.</help>
            <label xml:lang="en">Free keyword</label>
            <help xml:lang="en">Means of providing a list of keywords for quick discovery</help>
            <isMandatory>NA</isMandatory>
            <isMultiple>true</isMultiple>
            <hasRoot>/sml:PhysicalComponent/sml:keywords/sml:KeywordList</hasRoot>
            <produces>
                <item>
                    <hasIndex>1</hasIndex>
                    <hasPath>sml:keyword</hasPath>
                    <isFixed>false</isFixed>
                    <hasDatatype>string</hasDatatype>
                </item>
            </produces>
        </element>
    </group>
    <!--END Keyword Group -->

    <!--============== -->
    <!--Identification -->
    <!--============== -->
    <!-- valid -->
    <group>
        <id>system_ids</id>
        <label xml:lang="it">Identificazione</label>
        <!--<help xml:lang="it">Questa parte fornisce diversi valori di identit&#224; e di alias, con
            tipi come &quot;nome breve del sesnore&quot; (alias), &quot;nome per esteso&quot;,
            &quot;numero del modello&quot;, &quot;numero seriale&quot;, ecc.</help>-->
        <label xml:lang="en">Identification of the component</label>
        <!--<help xml:lang="en">Means of providing various identity and alias values, with types such as
            &quot;longName&quot;, &quot;abbreviation&quot;, &quot;modelNumber&quot;,
            &quot;serialNumber&quot;, whose terms can be defined in a dictionary.</help>-->
        <element>
            <id>unique_id</id>
            <label xml:lang="en">Unique ID</label>
            <help xml:lang="it">Provvede a fornire un identificatore unico</help>
            <label xml:lang="it">ID unico</label>
            <help xml:lang="en">Means of providing unique identifier</help>
            <isMandatory>NA</isMandatory>
            <isMultiple>false</isMultiple>
            <hasRoot>/sml:PhysicalComponent/sml:identification/sml:IdentifierList/sml:identifier/sml:Term[@definition=&apos;uniqueID&apos;]</hasRoot>
            <produces>
                <item>
                    <hasIndex>1</hasIndex>
                    <hasPath>sml:label</hasPath>
                    <isFixed>true</isFixed>
                    <hasDatatype>string</hasDatatype>
                    <hasValue>uniqueID</hasValue>
                </item>
                <item>
                    <hasIndex>2</hasIndex>
                    <hasPath>sml:identifier/sml:Term/sml:value</hasPath>
                    <isFixed>true</isFixed>
                    <hasDatatype>sensorID</hasDatatype>
                    <hasValue>auto</hasValue>
                </item>
            </produces>
        </element>
        <!-- Serial Number -->
        <element>
            <id>serial_num</id>
            <label xml:lang="it">Numero seriale</label>
            <help xml:lang="it">Indicare il numero seriale, se presente, del componente.</help>
            <label xml:lang="en">Serial Number</label>
	        <help xml:lang="en">Serial number, if available, of the physical component.</help>
            <isMandatory>NA</isMandatory>
            <isMultiple>false</isMultiple>
            <hasRoot>/sml:PhysicalComponent/sml:identification/sml:IdentifierList/sml:identifier/sml:Term[@definition=&apos;serialNumber&apos;]</hasRoot>
            <produces>
                <item>
                    <hasIndex>1</hasIndex>
                    <hasPath>sml:identifier/sml:Term/sml:label</hasPath>
                    <isFixed>true</isFixed>
                    <hasDatatype>string</hasDatatype>
                    <hasValue>Serial Number</hasValue>
                </item>
                <item>
                    <hasIndex>2</hasIndex>
                    <hasPath>sml:identifier/sml:Term/sml:value</hasPath>
                    <isFixed>false</isFixed>
                    <hasDatatype>string</hasDatatype>
                    <!--<hasValue>user-defined</hasValue>-->
                </item>
            </produces>
        </element>
    </group>
    <!-- END Identification group -->

    <!--============ -->
    <!--Link to Base -->
    <!--============ -->
    <!-- <sml:typeOf xlink:title="urn:heath:2070"
        xlink:href="http://www.sensorml.com/sensorML-2.0/examples/xml/gamma2070.xml"/> -->
    <group>
        <id>type_of</id>
        <element>
            <isMandatory>NA</isMandatory>
            <isMultiple>false</isMultiple>
            <hasRoot>/sml:PhysicalComponent</hasRoot>
            <produces>
                <item>
                    <hasIndex>1</hasIndex>
                    <hasPath>sml:typeOf/@xlink:href</hasPath>
                    <isFixed>false</isFixed>
                    <hasDatatype>URL</hasDatatype>
                </item>
                <item>
                    <hasIndex>2</hasIndex>
                    <hasPath>sml:typeOf/@xlink:title</hasPath>
                    <isFixed>false</isFixed>
                    <hasDatatype>string</hasDatatype>
                </item>
            </produces>
        </element>
    </group>
    <!-- END Link to Base group -->
    
    <!--================== -->
    <!-- System Capability -->
    <!--================== -->
    <!-- valid -->
    <group>
        <id>capab</id>
        <label xml:lang="it">Capacit&#224;</label>
        <label xml:lang="en">Capabilities</label>
        <!-- status -->
        <element>
            <id>status_capab</id>
            <label xml:lang="it">Stato del componente</label>
            <help xml:lang="it">Viene indicato se il componente &#232; attivo o disattivato.
                Spuntare la casella nel caso di componente attivo</help>
            <label xml:lang="en">Status</label>
            <help xml:lang="en">Tick the box if the physical component is on, otherwise it is off.</help>
            <isMandatory>forAll</isMandatory>
            <isMultiple>false</isMultiple>
            <hasRoot>/sml:PhysicalComponent/sml:capabilities[@name=&apos;specification&apos;]/sml:CapabilityList/sml:capability[@name=&apos;StatusCapabilities&apos;]/swe:DataRecord[@definition=&apos;StatusCapabilities&apos;]/swe:field[@name=&apos;status&apos;]</hasRoot>
            <produces>
                <item>
                    <hasIndex>1</hasIndex>
                    <hasPath>swe:Boolean/swe:value</hasPath>
                    <isFixed>false</isFixed>
                    <hasDatatype>boolean</hasDatatype>
                    <hasValue>false</hasValue>
                </item>
            </produces>
        </element>
        <!--mobility -->
        <element>
            <id>mobility_capab</id>
            <label xml:lang="it">Caratteristiche di mobilit&#224;</label>
            <help xml:lang="it">Viene indicato se il componente &#232; mobile o fisso. Spuntare la
                casella nel caso si tratti di componente mobile</help>
            <label xml:lang="en">Mobility Capabilities</label>
            <help xml:lang="en">Tick the box if the physical system is mobile, otherwise it is fixed.</help>
            <isMandatory>forAll</isMandatory>
            <isMultiple>false</isMultiple>
            <hasRoot>/sml:PhysicalComponent/sml:capabilities[@name=&apos;specification&apos;]/sml:CapabilityList/sml:capability[@name=&apos;StatusCapabilities&apos;]/swe:DataRecord[@definition=&apos;StatusCapabilities&apos;]/swe:field[@name=&apos;mobile&apos;]</hasRoot>
            <produces>
                <item>
                    <hasIndex>1</hasIndex>
                    <hasPath>swe:Boolean/swe:value</hasPath>
                    <isFixed>false</isFixed>
                    <hasDatatype>boolean</hasDatatype>
                    <hasValue>false</hasValue>
                </item>
            </produces>
        </element>
        <!--storage -->
        <element>
            <id>storage_type</id>
            <label xml:lang="it">Tipo di memoria</label>
            <help xml:lang="it">Indicare il tipo di memoria che viene utilizzato per archiviare le
                osservazioni raccolte dal componente (es. data logger)</help>
            <label xml:lang="en">Storage Type</label>
            <help xml:lang="en">The type of storage of the observations collected by the physical component (e.g. data logger)</help>
            <isMandatory>NA</isMandatory>
            <isMultiple>false</isMultiple>
            <hasRoot>/sml:PhysicalComponent/sml:capabilities[@name=&apos;specification&apos;]/sml:CapabilityList/sml:capability[@name=&apos;OperationalCapabilities&apos;]/swe:DataRecord[@definition=&apos;OperationalCapabilities&apos;]/swe:field[@name=&apos;Storage_Type&apos;]/swe:Category[@definition=&apos;Storage_Type&apos;]</hasRoot>
            <produces>
                <item>
                    <hasIndex>1</hasIndex>
                    <hasPath>swe:value</hasPath>
                    <isFixed>false</isFixed>
                    <hasDatatype>string</hasDatatype>
                </item>
            </produces>
        </element>
    </group>
    <!--END System Capability -->

    <!--================= -->
    <!--Relevant Contacts -->
    <!--================= -->
    <!-- valid -->
    <group>
        <id>rel_contacts</id>
        <label xml:lang="it">Punti di contatto</label>
        <!--<help xml:lang="it">Punti di contatto per il systema</help>-->
        <label xml:lang="en">Relevant Contacts</label>
        <!--<help xml:lang="en">Relevant contacts for that system</help>-->
        <!--======================== -->
        <!--Relevant Contacts: Owner -->
        <!--======================== -->
        <element>
            <id>owner</id>
            <label xml:lang="it">Informazioni sul proprietario</label>
            <help xml:lang="it">Contatti del proprietario; queste informazioni vengono autocompilate qualora il proprietario figuri nelle liste anagrafiche
             del progetto RITMARE</help>
            <label xml:lang="en">Owner</label>
            <help xml:lang="en">Owner contact information; autocompletion is performed if the owner appears in the RITMARE project contacts&#8217; repository</help>
            <help/>
            <isMandatory>NA</isMandatory>
            <isMultiple>false</isMultiple>
            <hasRoot>/sml:PhysicalComponent/sml:contacts/sml:ContactList/sml:contact[@xlink:arcrole=&apos;urn:ogc:def:classifiers:OGC:contactType:owner&apos;]/gmd:CI_ResponsibleParty</hasRoot>
            <produces>
                <item>
                    <hasIndex>1</hasIndex>
                    <outIndex>8</outIndex>
                    <label xml:lang="it">e-mail proprietario</label>
                    <help/>
                    <label xml:lang="en">Owner e-mail address</label>
                    <help/>
                    <hasPath>gmd:contactInfo/gmd:address/gmd:CI_Address/gmd:electronicMailAddress/gco:CharacterString</hasPath>
                    <isFixed>false</isFixed>
                    <id>electronicMailAddress</id>
                    <hasDatatype>autoCompletion</hasDatatype>
                    <datasource>owners</datasource>
                    <!--es mauro.bastianini@ismar.cnr.it -->
                </item>
                <item>
                    <hasIndex>2</hasIndex>
                    <outIndex>1</outIndex>
                    <hasPath>gmd:organizationName/gco:CharacterString</hasPath>
                    <isFixed>false</isFixed>
                    <id>sml:organisationName</id>
                    <hasDatatype>select</hasDatatype>
                    <datasource>info_owner</datasource>
                    <field>l</field>
                    <label xml:lang="it">Organizzazione proprietario</label>
                    <help/>
                    <label xml:lang="en">Owner organization</label>
                    <help/>
                    <!--es CNR Institute of Marine Science (CNR - ISMAR) -->
                </item>
                <item>
                    <hasIndex>3</hasIndex>
                    <outIndex>2</outIndex>
                    <hasPath>gmd:contactInfo/gmd:CI_Contact/gmd:phone/gmd:CI_Telephone/gmd:voice/gco:CharacterString</hasPath>
                    <isFixed>false</isFixed>
                    <hasDatatype>select</hasDatatype>
                    <datasource>info_owner</datasource>
                    <field>phone</field>
                    <label xml:lang="it">Telefono proprietario</label>
                    <help/>
                    <label xml:lang="en">Owner phone number</label>
                    <help/>
                    <!--es 0039 041 240 7982 -->
                </item>
                <item>
                    <hasIndex>4</hasIndex>
                    <outIndex>3</outIndex>
                    <hasPath>gmd:contactInfo/gmd:address/gmd:CI_Address/gmd:deliveryPoint/gco:CharacterString</hasPath>
                    <isFixed>false</isFixed>
                    <hasDatatype>select</hasDatatype>
                    <datasource>info_owner</datasource>
                    <field>addr</field>
                    <label xml:lang="it">Indirizzo proprietario</label>
                    <help/>
                    <label xml:lang="en">Owner address</label>
                    <help/>
                    <!--es Castello 2737/F Tesa 104 -->
                </item>
                <item>
                    <hasIndex>5</hasIndex>
                    <outIndex>4</outIndex>
                    <hasPath>gmd:contactInfo/gmd:address/gmd:CI_Address/gmd:city/gco:CharacterString</hasPath>
                    <isFixed>false</isFixed>
                    <hasDatatype>select</hasDatatype>
                    <datasource>info_owner</datasource>
                    <field>town</field>
                    <label xml:lang="it">Citt&#224; proprietario</label>
                    <help/>
                    <label xml:lang="en">Owner city</label>
                    <help/>
                    <!--es Venezia -->
                </item>
                <!--<item>
                    <hasIndex>6</hasIndex>
                    <outIndex>5</outIndex>
                    <hasPath>/swes:InsertSensor/swes:procedureDescription/sml:SensorML/sml:member/sml:System/sml:contact[@xlink:arcrole=&apos;urn:ogc:def:classifiers:OGC:contactType:owner&apos;]/sml:ResponsibleParty/sml:contactInfo/sml:address/sml:administrativeArea</hasPath>
                    <isFixed>false</isFixed>
                    <hasDatatype>select</hasDatatype>
                    <datasource>info_owner</datasource>
                    <field>region</field>
                    <label xml:lang="it">Area amministrativa proprietario</label>
                    <help/>
                    <label xml:lang="en">Owner administrative area</label>
                    <help/>
                </item>-->
                <item>
                    <hasIndex>7</hasIndex>
                    <outIndex>6</outIndex>
                    <hasPath>gmd:contactInfo/gmd:address/gmd:CI_Address/gmd:postalCode/gco:CharacterString</hasPath>
                    <isFixed>false</isFixed>
                    <hasDatatype>select</hasDatatype>
                    <datasource>info_owner</datasource>
                    <field>postcode</field>
                    <label xml:lang="it">CAP proprietario</label>
                    <help/>
                    <label xml:lang="en">Owner Postal code</label>
                    <help/>
                    <!--es IT-30122 -->
                </item>
                <item>
                    <hasIndex>8</hasIndex>
                    <outIndex>7</outIndex>
                    <hasPath>gmd:contactInfo/gmd:address/gmd:CI_Address/gmd:country/gco:CharacterString</hasPath>
                    <isFixed>false</isFixed>
                    <hasDatatype>select</hasDatatype>
                    <datasource>info_owner</datasource>
                    <field>country</field>
                    <label xml:lang="it">Nazione proprietario</label>
                    <help/>
                    <label xml:lang="en">Owner country</label>
                    <help/>
                    <!--es Italy -->
                </item>
                <item>
                    <hasIndex>9</hasIndex>
                    <outIndex>9</outIndex>
                    <hasPath>gmd:contactInfo/gmd:onlineResource/gmd:CI_OnlineResource/gmd:linkage/gmd:URL</hasPath>
                    <isFixed>false</isFixed>
                    <hasDatatype>select</hasDatatype>
                    <datasource>info_owner</datasource>
                    <field>homepage</field>
                    <label xml:lang="it">Sito web proprietario</label>
                    <help/>
                    <label xml:lang="en">Owner web site</label>
                    <help/>
                    <!--es http://www.sensirion.com -->
                </item>
            </produces>
        </element>
        <!--=========================== -->
        <!--Relevant Contacts: Operator -->
        <!--=========================== -->
        <element>
            <id>operator</id>
            <label xml:lang="it">Informazioni sull&apos;operatore</label>
            <help xml:lang="it">Contatti dell&apos;operatore; queste informazioni vengono autocompilate qualora l&apos;operatore figuri nelle liste anagrafiche del progetto RITMARE.</help>
            <label xml:lang="en">Operator</label>
            <help xml:lang="en">Operator contact information; autocompletion is performed if the operator appears in the RITMARE project contacts&#8217; repository.</help>
            <isMandatory>NA</isMandatory>
            <isMultiple>false</isMultiple>
            <hasRoot>/sml:PhysicalComponent/sml:contacts/sml:ContactList/sml:contact[@xlink:arcrole=&apos;urn:ogc:def:classifiers:OGC:contactType:operator&apos;]/gmd:CI_ResponsibleParty</hasRoot>
            <produces>
                <item>
                    <hasIndex>1</hasIndex>
                    <outIndex>8</outIndex>
                    <hasPath>gmd:contactInfo/gmd:address/gmd:CI_Address/gmd:electronicMailAddress/gco:CharacterString</hasPath>
                    <isFixed>false</isFixed>
                    <id>electronicMailAddress</id>
                    <hasDatatype>autoCompletion</hasDatatype>
                    <datasource>operators</datasource>
                    <label xml:lang="it">e-mail operatore</label>
                    <help/>
                    <label xml:lang="en">Operator e-mail address</label>
                    <help/>
                    <!--es mauro.bastianini@ismar.cnr.it -->
                </item>
                <item>
                    <hasIndex>2</hasIndex>
                    <outIndex>1</outIndex>
                    <hasPath>gmd:organizationName/gco:CharacterString</hasPath>
                    <isFixed>false</isFixed>
                    <id>sml:organisationName</id>
                    <hasDatatype>select</hasDatatype>
                    <datasource>info_operator</datasource>
                    <field>l</field>
                    <label xml:lang="it">Nome operatore</label>
                    <help/>
                    <label xml:lang="en">Operator name</label>
                    <help/>
                    <!--es CNR Institute of Marine Science (CNR - ISMAR) -->
                </item>
                <item>
                    <hasIndex>3</hasIndex>
                    <outIndex>2</outIndex>
                    <hasPath>gmd:contactInfo/gmd:CI_Contact/gmd:phone/gmd:CI_Telephone/gmd:voice/gco:CharacterString</hasPath>
                    <isFixed>false</isFixed>
                    <hasDatatype>select</hasDatatype>
                    <datasource>info_operator</datasource>
                    <field>phone</field>
                    <label xml:lang="it">Telefono operatore</label>
                    <help/>
                    <label xml:lang="en">Operator phone number</label>
                    <help/>
                    <!--es 0039 041 240 7982 -->
                </item>
                <item>
                    <hasIndex>4</hasIndex>
                    <outIndex>3</outIndex>
                    <hasPath>gmd:contactInfo/gmd:address/gmd:CI_Address/gmd:deliveryPoint/gco:CharacterString</hasPath>
                    <isFixed>false</isFixed>
                    <hasDatatype>select</hasDatatype>
                    <datasource>info_operator</datasource>
                    <field>addr</field>
                    <label xml:lang="it">Indirizzo operatore</label>
                    <help/>
                    <label xml:lang="en">Operator address</label>
                    <help/>
                    <!--es Castello 2737/F Tesa 104 -->
                </item>
                <item>
                    <hasIndex>5</hasIndex>
                    <outIndex>4</outIndex>
                    <hasPath>gmd:contactInfo/gmd:address/gmd:CI_Address/gmd:city/gco:CharacterString</hasPath>
                    <isFixed>false</isFixed>
                    <hasDatatype>select</hasDatatype>
                    <datasource>info_operator</datasource>
                    <field>town</field>
                    <label xml:lang="it">Citt&#224; operatore</label>
                    <help/>
                    <label xml:lang="en">Operator city</label>
                    <help/>
                    <!--es Venezia -->
                </item>
                <!--<item>
                    <hasIndex>6</hasIndex>
                    <outIndex>5</outIndex>
                    <hasPath>/swes:InsertSensor/swes:procedureDescription/sml:SensorML/sml:member/sml:System/sml:contact[@xlink:arcrole=&apos;urn:ogc:def:classifiers:OGC:contactType:operator&apos;]/sml:ResponsibleParty/sml:contactInfo/sml:address/sml:administrativeArea</hasPath>
                    <isFixed>false</isFixed>
                    <hasDatatype>string</hasDatatype>
                    <hasValue>user-defined</hasValue>
                    <label xml:lang="it">Area amministrativa operatore</label>
                    <help/>
                    <label xml:lang="en">Operator administrative area</label>
                    <help/>
                </item>-->
                <item>
                    <hasIndex>7</hasIndex>
                    <outIndex>6</outIndex>
                    <hasPath>gmd:contactInfo/gmd:address/gmd:CI_Address/gmd:postalCode/gco:CharacterString</hasPath>
                    <isFixed>false</isFixed>
                    <hasDatatype>select</hasDatatype>
                    <datasource>info_operator</datasource>
                    <field>postcode</field>
                    <label xml:lang="it">CAP operatore</label>
                    <help/>
                    <label xml:lang="en">Operator Postal code</label>
                    <help/>
                    <!--es IT-30122 -->
                </item>
                <item>
                    <hasIndex>8</hasIndex>
                    <outIndex>7</outIndex>
                    <hasPath>gmd:contactInfo/gmd:address/gmd:CI_Address/gmd:country/gco:CharacterString</hasPath>
                    <isFixed>false</isFixed>
                    <hasDatatype>select</hasDatatype>
                    <datasource>info_operator</datasource>
                    <field>country</field>
                    <label xml:lang="it">Nazione operatore</label>
                    <help/>
                    <label xml:lang="en">Operator country</label>
                    <help/>
                    <!--es Italy -->
                </item>
                <item>
                    <hasIndex>9</hasIndex>
                    <outIndex>9</outIndex>
                    <hasPath>gmd:contactInfo/gmd:onlineResource/gmd:CI_OnlineResource/gmd:linkage/gmd:URL</hasPath>
                    <isFixed>false</isFixed>
                    <hasDatatype>select</hasDatatype>
                    <datasource>info_operator</datasource>
                    <field>homepage</field>
                    <label xml:lang="it">Sito web operatore</label>
                    <help/>
                    <label xml:lang="en">Operator web site</label>
                    <help/>
                    <!--es http://www.sensirion.com -->
                </item>
                <item>
                    <hasIndex>10</hasIndex>
                    <outIndex>10</outIndex>
                    <hasPath>gmd:role/gmd:CI_RoleCode/@codeList</hasPath>
                    <isFixed>true</isFixed>
                    <hasDatatype>URI</hasDatatype>
                    <hasValue>http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/Codelist/gmxCodelists.xml#CI_RoleCode</hasValue>
                </item>
                <item>
                    <hasIndex>11</hasIndex>
                    <outIndex>11</outIndex>
                    <hasPath>gmd:role/gmd:CI_RoleCode</hasPath>
                    <isFixed>true</isFixed>
                    <datasource>roleCodes</datasource>
                    <hasDatatype>codelist</hasDatatype>
                    <defaultValue>http://inspire.ec.europa.eu/metadata-codelist/ResponsiblePartyRole/pointOfContact</defaultValue>
                    <isLanguageNeutral>true</isLanguageNeutral>
                </item>
                <item>
                    <hasIndex>12</hasIndex>
                    <outIndex>12</outIndex>
                    <hasPath>gmd:role/gmd:CI_RoleCode/@codeListValue</hasPath>
                    <isFixed>true</isFixed>
                    <hasDatatype>ref</hasDatatype>
                    <hasValue>/sml:PhysicalSystem/sml:contacts/sml:ContactList/sml:contact[@xlink:arcrole=&apos;urn:ogc:def:classifiers:OGC:contactType:operator&apos;]/gmd:CI_ResponsibleParty/gmd:role/gmd:CI_RoleCode</hasValue>
                </item>
            </produces>
        </element>
    </group>
    <!--END Relevant Contacts Group -->

    <!--======= -->
    <!--History -->
    <!--======= -->
    <group>
        <id>history</id>
        <label xml:lang="it">Storia del componente</label>
        <help xml:lang="it">Eventi cui il sistema &#232; andato incontro nel tempo (es. modifiche, ricalibrazione, ecc.)</help>
        <label xml:lang="en">History</label>
        <help xml:lang="en">Events regarding the physical component in time (e.g., calibration, adjustments, etc.)</help>
        <element>
            <id>history</id>
            <isMandatory>NA</isMandatory>
            <isMultiple>true</isMultiple>
            <hasRoot>/sml:PhysicalComponent/sml:history/sml:EventList</hasRoot>
            <produces>
                <item>
                    <hasIndex>1</hasIndex>
                    <hasPath>sml:event/sml:Event/swe:label</hasPath>
                    <isFixed>false</isFixed>
                    <hasDatatype>string</hasDatatype>
                    <label xml:lang="it">Tipo di modifica</label>
                    <help xml:lang="it">Dare un titolo alla modifica effettuata sul sistema (es. installazione, calibrazione, update, upgrade)</help>
                    <label xml:lang="en">Event</label>
                    <help xml:lang="en">Add the label of event (eg. installation, calibration, update, upgrade etc.)</help>
                </item>
                <item>
                    <hasIndex>2</hasIndex>
                    <hasPath>sml:event/sml:Event/swe:description</hasPath>
                    <isFixed>false</isFixed>
                    <hasDatatype>text</hasDatatype>
                    <!--<hasValue>user-defined</hasValue>-->
                    <label xml:lang="it">Descrizione della modifica</label>
                    <help xml:lang="it">Breve descrizione della modifica sul sistema</help>
                    <label xml:lang="en">Event description</label>
                    <help xml:lang="en">Brief description of the event</help>
                </item>
                <item>
                    <hasIndex>3</hasIndex>
                    <hasPath>sml:event/sml:Event/sml:time/gml:TimeInstant/gml:timePosition</hasPath>
                    <isFixed>false</isFixed>
                    <hasDatatype>date</hasDatatype>
                    <!--<hasValue>user-defined</hasValue>-->
                    <label xml:lang="it">Data di installazione</label>
                    <help/>
                    <label xml:lang="en">Installation date</label>
                    <help/>
                    <!--es 2013-07-15 -->
                </item>
                <item>
                    <hasIndex>4</hasIndex>
                    <hasPath>sml:event/sml:Event/sml:time/gml:TimeInstant[@gml:id]</hasPath>
                    <isFixed>false</isFixed>
                    <hasDatatype>function</hasDatatype>
                    <hasValue>concat('event', translate(sml:event/sml:Event/sml:time/gml:TimeInstant/gml:timePosition/text(), '-', ''))</hasValue>
                    <!--es event_20130705-->
                </item>
            </produces>
        </element>
    </group>
    <!--END History Group -->
    
    <!--================== -->
    <!--featuresOfInterest -->
    <!--================== -->
    <group>
        <id>foi_sml</id>
        <label xml:lang="it">Zona di interesse</label>
        <help xml:lang="it">Zona geografica a cui il sensore è associato. Aggiungere URL di WFS di un servizio web geografico</help>
        <label xml:lang="en">Feature Of Interest</label>
        <help xml:lang="en">The geometric sensor to which the system is associated. Add a URL of a WFS item</help>
        <element>
            <id>foi</id>
            <isMandatory>forAll</isMandatory>
            <isMultiple>false</isMultiple>
            <hasRoot>/sml:PhysicalSystem/sml:featuresOfInterest/sml:FeatureList[@definition=&apos;http://www.opengis.net/def/featureOfInterest/identifier&apos;]</hasRoot>
            <produces>
                <item>
                    <hasIndex>1</hasIndex>
                    <hasPath>sml:feature/@xlink:href</hasPath>
                    <isFixed>false</isFixed>
                    <hasDatatype>URL</hasDatatype>
                </item>
            </produces>
        </element>
    </group>
</template>